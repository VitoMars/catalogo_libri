(function(){"use strict";var o={4088:function(o,t,e){var i=e(144),a=e(998),r=e(4324),s=e(3059),l=e(626),n=e(1344),u=function(){var o=this,t=o._self._c;return t(a.Z,[t(s.Z,[t(n.Z,{attrs:{"background-color":"grey darken-4",centered:"",dark:"","icons-and-text":""},model:{value:o.tab,callback:function(t){o.tab=t},expression:"tab"}},[t(l.Z,{attrs:{href:"#tab-1"},on:{click:function(t){return o.navigateTo("/")}}},[o._v(" Libri "),t(r.Z,[o._v("mdi-bookshelf")])],1),t(l.Z,{attrs:{href:"#tab-2"},on:{click:function(t){return o.navigateTo("/authors")}}},[o._v(" Autori "),t(r.Z,[o._v("mdi-account-multiple")])],1)],1),t("div",{staticClass:"container"},[t("router-view")],1)],1)],1)},c=[],d=(e(560),{name:"App",data:()=>({tab:null}),methods:{navigateTo(o){this.$route.path!==o&&this.$router.push(o)},updateTab(){switch(this.$route.path){case"/":this.tab="tab-1";break;case"/authors":this.tab="tab-2";break;default:this.tab="tab-1";break}}},mounted(){this.updateTab()}}),h=d,k=e(1001),b=(0,k.Z)(h,u,c,!1,null,null,null),p=b.exports,f=e(8345),m=function(){var o=this,t=o._self._c;return t("BookList")},v=[],g=e(7359),_=e(4562),B=e(2016),Z=e(9582),y=e(4886),D=e(9930),x=e(5005),w=e(5808),C=e(4525),T=e(5187),E=e(6740),A=e(7912),L=e(9592),j=e(6243),$=e(8687),O=e(8903),S=e(7808),P=function(){var o=this,t=o._self._c;return t(Z.Z,{staticClass:"rounded-xl pa-5",attrs:{elevation:"4"}},[t("h1",{staticClass:"text-center"},[o._v("Lista libri")]),o.loading?t(L.Z,{attrs:{indeterminate:""}}):t("div",{staticClass:"mx-4 mt-4"},[t(S.Z,{attrs:{label:"Cerca libro"},model:{value:o.searchBook,callback:function(t){o.searchBook=t},expression:"searchBook"}}),t(O.Z,{attrs:{items:o.authors,label:"Filtro autori",multiple:"",chips:"",dense:""},model:{value:o.selectedAuthors,callback:function(t){o.selectedAuthors=t},expression:"selectedAuthors"}}),t("div",{staticClass:"grey--text text--darken-3"},[o._v("Ordina per")]),t("div",{staticClass:"d-flex justify-space-between align-center flex-wrap"},[t($.Z,{attrs:{row:""},model:{value:o.sortCriteria,callback:function(t){o.sortCriteria=t},expression:"sortCriteria"}},[t(j.Z,{attrs:{label:"Titolo",value:"title"}}),t(j.Z,{attrs:{label:"Anno di pubblicazione",value:"publish_year"}})],1),t(B.Z,{model:{value:o.sortDirection,callback:function(t){o.sortDirection=t},expression:"sortDirection"}},[t(_.Z,{attrs:{small:"",value:"asc"}},[o._v("Asc")]),t(_.Z,{attrs:{small:"",value:"desc"}},[o._v("Desc")])],1)],1)],1),t(w.Z,[o.filteredBooks.length?t(A.Z,o._l(o.filteredBooks,(function(e){return t(C.Z,{key:e.id},[t(T.Z,{staticClass:"d-none d-sm-flex"},[t(_.Z,{attrs:{icon:""},on:{click:function(t){return o.openDetailBookDialog(e)}}},[t(r.Z,{attrs:{color:"green"}},[o._v("mdi-information")])],1)],1),t(E.km,{on:{click:function(t){return o.openDetailBookDialog(e)}}},[t(E.V9,[o._v(o._s(e.title))]),t(E.oZ,[o._v(o._s(e.author)+" - "+o._s(e.publish_year))])],1),t(T.Z,{staticClass:"mx-0 mx-sm-2"},[t(_.Z,{attrs:{icon:""},on:{click:function(t){return o.openEditBookDialog(e)}}},[t(r.Z,{attrs:{color:"blue"}},[o._v("mdi-pencil")])],1)],1),t(T.Z,{staticClass:"mx-0 mx-sm-2"},[t(_.Z,{attrs:{icon:""},on:{click:function(t){return o.openDeleteBookDialog(e)}}},[t(r.Z,{attrs:{color:"red"}},[o._v("mdi-delete")])],1)],1)],1)})),1):t(g.Z,{staticClass:"my-3 mx-4",attrs:{type:"info",icon:"mdi-information",shaped:""}},[o._v(" Nessun libro trovato. ")])],1),t(D.Z,{attrs:{"max-width":"500"},model:{value:o.addBookDialog,callback:function(t){o.addBookDialog=t},expression:"addBookDialog"}},[t(Z.Z,[t(y.EB,[o._v("Aggiungi nuovo libro")]),t(y.ZB,[t(x.Z,{ref:"addBookForm",on:{submit:function(t){return t.preventDefault(),o.addBook.apply(null,arguments)}}},[t(S.Z,{attrs:{label:"Titolo",rules:[o=>!!o||"Il titolo è obbligatorio"]},model:{value:o.newBook.title,callback:function(t){o.$set(o.newBook,"title",t)},expression:"newBook.title"}}),t(S.Z,{attrs:{label:"Autore",rules:[o=>!!o||"L'autore è obbligatorio"]},model:{value:o.newBook.author,callback:function(t){o.$set(o.newBook,"author",t)},expression:"newBook.author"}}),t(S.Z,{attrs:{label:"Anno di pubblicazione",rules:o.yearRules},model:{value:o.newBook.publish_year,callback:function(t){o.$set(o.newBook,"publish_year",t)},expression:"newBook.publish_year"}}),t(_.Z,{attrs:{type:"submit",color:"primary"}},[o._v("Aggiungi libro")])],1)],1)],1)],1),t(D.Z,{attrs:{"max-width":"500"},model:{value:o.editBookDialog,callback:function(t){o.editBookDialog=t},expression:"editBookDialog"}},[t(Z.Z,[t(y.EB,[o._v("Modifica libro")]),t(y.ZB,[t(x.Z,{ref:"editBookForm",on:{submit:function(t){return t.preventDefault(),o.editBook.apply(null,arguments)}}},[t(S.Z,{attrs:{label:"Titolo",rules:[o=>!!o||"Il titolo è obbligatorio"]},model:{value:o.bookToEdit.title,callback:function(t){o.$set(o.bookToEdit,"title",t)},expression:"bookToEdit.title"}}),t(S.Z,{attrs:{label:"Autore",rules:[o=>!!o||"L'autore è obbligatorio"]},model:{value:o.bookToEdit.author,callback:function(t){o.$set(o.bookToEdit,"author",t)},expression:"bookToEdit.author"}}),t(S.Z,{attrs:{label:"Anno di pubblicazione",rules:o.yearRules},model:{value:o.bookToEdit.publish_year,callback:function(t){o.$set(o.bookToEdit,"publish_year",t)},expression:"bookToEdit.publish_year"}}),t(_.Z,{attrs:{type:"submit",color:"primary"}},[o._v("Salva modifiche")])],1)],1)],1)],1),t(D.Z,{attrs:{"max-width":"400",persistent:""},model:{value:o.deleteBookDialog,callback:function(t){o.deleteBookDialog=t},expression:"deleteBookDialog"}},[t(Z.Z,{staticClass:"px-1 pb-2"},[t(y.EB,[o._v("Conferma eliminazione")]),t(y.ZB,[o._v(" Sei sicuro di voler eliminare questo libro? ")]),t(y.h7,{staticClass:"d-flex justify-end"},[t(_.Z,{attrs:{color:"primary",text:""},on:{click:function(t){o.deleteBookDialog=!1}}},[o._v("Annulla")]),t(_.Z,{attrs:{color:"error"},on:{click:o.deleteBook}},[o._v("Elimina")])],1)],1)],1),t("BookDetail",{ref:"bookDetail",attrs:{selectedBook:o.selectedBook}}),t("div",{staticClass:"d-flex justify-end mx-2"},[t(_.Z,{attrs:{fab:"",color:"primary"},on:{click:o.openAddBookDialog}},[t(r.Z,[o._v("mdi-plus")])],1)],1)],1)},I=[],F=e(5121);const z="https://openlibrary.org/people/mekBot/books/currently-reading.json";var V={async getBooks(){try{const o=await F.Z.get(z);return o.data}catch(o){throw console.error("Errore durante la richiesta dei libri:",o),o}}},M=e(5495),R=e(3305),W=function(){var o=this,t=o._self._c;return t(D.Z,{attrs:{"max-width":"500"},on:{"click:outside":function(t){return o.closeDetailDialog()}},model:{value:o.detailDialog,callback:function(t){o.detailDialog=t},expression:"detailDialog"}},[t(Z.Z,[t(y.EB,[o._v("Dettagli libro")]),t(y.ZB,{staticClass:"pb-0"},[t(w.Z,[t(C.Z,[t(E.km,[t(E.V9,[o._v("Titolo: "+o._s(o.selectedBook.title))]),t(E.oZ,[o._v("Autore: "+o._s(o.selectedBook.author))]),t(E.oZ,[o._v("Anno di pubblicazione: "+o._s(o.selectedBook.publish_year))])],1)],1)],1)],1),o.imageLoaded?o._e():t("div",{staticClass:"text-center"},[t(R.Z,{attrs:{indeterminate:"",color:"primary"}})],1),t(M.Z,{attrs:{src:o.selectedBook.cover_url,"max-height":o.imageLoaded?"500px":0},on:{load:o.handleImageLoad}}),t(y.h7,{staticClass:"d-flex justify-end"},[t(_.Z,{attrs:{color:"primary",text:""},on:{click:function(t){return o.closeDetailDialog()}}},[o._v("Chiudi")])],1)],1)],1)},N=[],q={props:{selectedBook:Object},data(){return{detailDialog:!1,imageLoaded:!1}},methods:{closeDetailDialog(){this.detailDialog=!1},handleImageLoad(){this.imageLoaded=!0}}},H=q,G=(0,k.Z)(H,W,N,!1,null,null,null),J=G.exports,K={components:{BookDetail:J},data(){return{loading:!1,books:[],authors:[],selectedBook:{},selectedAuthors:[],addBookDialog:!1,editBookDialog:!1,deleteBookDialog:!1,newBook:{title:"",author:"",publish_year:""},bookToEdit:{title:"",author:"",publish_year:""},bookToDelete:null,sortCriteria:"title",sortDirection:"asc",searchBook:"",yearRules:[o=>/^\d{4}$/.test(o)||"Inserisci un anno valido (es. 2023)",o=>parseInt(o)>=1600&&parseInt(o)<=2023||"L'anno deve essere compreso tra 1600 e 2023"]}},methods:{openAddBookDialog(){this.addBookDialog=!0},openEditBookDialog(o){this.bookToEdit={...o},this.editBookDialog=!0},openDeleteBookDialog(o){this.bookToDelete=o,this.deleteBookDialog=!0},openDetailBookDialog(o){this.selectedBook=o,this.$refs.bookDetail.detailDialog=!0},addBook(){this.$refs.addBookForm.validate()&&(this.authors.includes(this.newBook.author)||this.authors.push(this.newBook.author),this.books.push({id:this.books.length+1,title:this.newBook.title,author:this.newBook.author,publish_year:this.newBook.publish_year}),this.addBookDialog=!1,this.newBook={title:"",author:"",publish_year:""})},editBook(){if(this.$refs.editBookForm.validate()){if(this.bookToEdit){const o=this.books.findIndex((o=>o.id===this.bookToEdit.id));-1!==o&&this.books.splice(o,1,{...this.bookToEdit})}this.editBookDialog=!1,this.bookToEdit={title:"",author:"",publish_year:""}}},deleteBook(){if(this.bookToDelete){const o=this.books.findIndex((o=>o.id===this.bookToDelete.id));-1!==o&&this.books.splice(o,1)}this.deleteBookDialog=!1,this.bookToDelete=null},sortBooks(o,t,e){const i=[...o];return"title"===t?i.sort(((o,t)=>"asc"===e?o.title.localeCompare(t.title):t.title.localeCompare(o.title))):"publish_year"===t&&i.sort(((o,t)=>"asc"===e?o.publish_year-t.publish_year:t.publish_year-o.publish_year)),i}},async created(){try{this.loading=!0;const{reading_log_entries:o}=await V.getBooks();this.books=o.map(((o,t)=>({id:t,title:o.work.title??"Sconosciuto",author:o.work.author_names[0]??"Sconosciuto",publish_year:o.work.first_publish_year??"Sconosciuto",cover_url:o.work.cover_id?`https://covers.openlibrary.org/b/id/${o.work.cover_id}-L.jpg`:null}))),console.log("Books:",this.books),this.authors=this.books.map((o=>o.author))}catch(o){console.error("Errore durante il caricamento dei libri:",o)}finally{this.loading=!1}},computed:{filteredBooks(){const o=this.sortBooks(this.books,this.sortCriteria,this.sortDirection),t=o.filter((o=>this.selectedAuthors.includes(o.author)||0===this.selectedAuthors.length));return t.filter((o=>o.title.toLowerCase().includes(this.searchBook.toLowerCase())))}}},Q=K,U=(0,k.Z)(Q,P,I,!1,null,null,null),X=U.exports,Y={name:"HomeView",components:{BookList:X}},oo=Y,to=(0,k.Z)(oo,m,v,!1,null,null,null),eo=to.exports,io=function(){var o=this,t=o._self._c;return t("AuthorsList")},ao=[],ro=function(){var o=this,t=o._self._c;return t(Z.Z,{staticClass:"rounded-xl pa-5",attrs:{elevation:"4"}},[t("h1",{staticClass:"text-center"},[o._v("Lista autori")]),o.loading?t(L.Z,{attrs:{indeterminate:""}}):o._e(),o._l(o.authorsWithBooks,(function(e){return t("div",{key:e.id},[t(Z.Z,{staticClass:"my-5"},[t(y.EB,[o._v(o._s(e.name))]),t("h4",{staticClass:"mx-4"},[o._v("Libri pubblicati: ")]),t(w.Z,[e.books.length>0?t(A.Z,o._l(e.books,(function(e){return t(C.Z,{key:e.id},[t(E.km,[t(E.V9,[o._v(o._s(e.title))]),t(E.oZ,[o._v(o._s(e.publish_year))])],1)],1)})),1):t(C.Z,[o._v(" Nessun libro disponibile ")])],1)],1)],1)}))],2)},so=[],lo={data(){return{loading:!1,authors:[],books:[],authorsWithBooks:[]}},async created(){try{this.loading=!0;const{reading_log_entries:o}=await V.getBooks();this.books=o.map(((o,t)=>({id:t,title:o.work.title??"Sconosciuto",author:o.work.author_names[0]??"Sconosciuto",publish_year:o.work.first_publish_year??"Sconosciuto",cover_url:o.work.cover_id?`https://covers.openlibrary.org/b/id/${o.work.cover_id}-L.jpg`:null}))),this.books=this.books.filter((o=>"Sconosciuto"!==o.title)),console.log("Books:",this.books),this.authors=this.books.map((o=>o.author)),this.authorsWithBooks=this.authors.map(((o,t)=>({id:t,name:o,books:this.books.filter((t=>t.author===o))})))}catch(o){console.error("Errore durante il caricamento dei libri:",o)}finally{this.loading=!1}}},no=lo,uo=(0,k.Z)(no,ro,so,!1,null,null,null),co=uo.exports,ho={name:"AuthorsView",components:{AuthorsList:co}},ko=ho,bo=(0,k.Z)(ko,io,ao,!1,null,null,null),po=bo.exports;i.ZP.use(f.ZP);const fo=[{path:"/",name:"home",component:eo},{path:"/authors",name:"authors",component:po}],mo=new f.ZP({mode:"history",base:"/",routes:fo});var vo=mo,go=e(629);i.ZP.use(go.ZP);var _o=new go.ZP.Store({state:{},getters:{},mutations:{},actions:{},modules:{}}),Bo=e(1705);i.ZP.use(Bo.Z);var Zo=new Bo.Z({});i.ZP.config.productionTip=!1,new i.ZP({router:vo,store:_o,vuetify:Zo,render:o=>o(p)}).$mount("#app")}},t={};function e(i){var a=t[i];if(void 0!==a)return a.exports;var r=t[i]={exports:{}};return o[i].call(r.exports,r,r.exports,e),r.exports}e.m=o,function(){var o=[];e.O=function(t,i,a,r){if(!i){var s=1/0;for(c=0;c<o.length;c++){i=o[c][0],a=o[c][1],r=o[c][2];for(var l=!0,n=0;n<i.length;n++)(!1&r||s>=r)&&Object.keys(e.O).every((function(o){return e.O[o](i[n])}))?i.splice(n--,1):(l=!1,r<s&&(s=r));if(l){o.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}r=r||0;for(var c=o.length;c>0&&o[c-1][2]>r;c--)o[c]=o[c-1];o[c]=[i,a,r]}}(),function(){e.n=function(o){var t=o&&o.__esModule?function(){return o["default"]}:function(){return o};return e.d(t,{a:t}),t}}(),function(){e.d=function(o,t){for(var i in t)e.o(t,i)&&!e.o(o,i)&&Object.defineProperty(o,i,{enumerable:!0,get:t[i]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(o){if("object"===typeof window)return window}}()}(),function(){e.o=function(o,t){return Object.prototype.hasOwnProperty.call(o,t)}}(),function(){e.r=function(o){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}}(),function(){var o={143:0};e.O.j=function(t){return 0===o[t]};var t=function(t,i){var a,r,s=i[0],l=i[1],n=i[2],u=0;if(s.some((function(t){return 0!==o[t]}))){for(a in l)e.o(l,a)&&(e.m[a]=l[a]);if(n)var c=n(e)}for(t&&t(i);u<s.length;u++)r=s[u],e.o(o,r)&&o[r]&&o[r][0](),o[r]=0;return e.O(c)},i=self["webpackChunkcatalogo_libri"]=self["webpackChunkcatalogo_libri"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=e.O(void 0,[998],(function(){return e(4088)}));i=e.O(i)})();
//# sourceMappingURL=app.a8cf0b5a.js.map